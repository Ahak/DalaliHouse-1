{% extends "base.html" %} {% block content%} {% load static %} {% include "navbar.html" %} {% if messages %} {% for message in messages %}
<div
  class="alert alert-{{ message.tags }} alert-dismissible fade show"
  role="alert"
>
  {{ message }}
  <button
    type="button"
    class="btn-close"
    data-bs-dismiss="alert"
    aria-label="Close"
  ></button>
</div>
{% endfor %} {% endif %}

<div class="container mt-5">
  <h2>My Payments</h2>
  <div class="table-responsive">
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Property Image</th>
          <th>Property Title</th>
          <th>Amount</th>
          <th>Date</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        {% for payment in payments %}
        <tr>
          <td>
            <img
              src="{{ payment.property.image1.url }}"
              alt=""
              style="width: 100px; height: auto"
            />
          </td>
          <td>{{ payment.property.title }}</td>
          <td>{{ payment.amount }} Tzs</td>
          <td>{{ payment.date }}</td>
          <td>
            <form
              method="post"
              action="{% url 'my-payments' %}"
              style="display: inline"
            >
              {% csrf_token %}
              <input type="hidden" name="pk" value="{{ payment.id }}" />
              <button type="submit" class="btn btn-danger btn-sm">
                Delete
              </button>
            </form>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="4">You haven't made any payments yet.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
